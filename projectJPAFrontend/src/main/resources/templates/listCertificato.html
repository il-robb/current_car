<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">	<title>JPA</title>
</head>
<body>
<nav th:insert="~{fragments/navigation :: block-navigation('Certificato medico')}"></nav>
	<div align="center" class="container">
		<input type="text" th:value="${socioId}">
		<table class="table table-stripped">
			<thead>
				<tr align="center">
					<th>Data</th>
					<th>Tipologia</th>
					<th>
						<a th:href="@{createCertificato(socioId=${socioId})}" class="btn btn-primary">Nuovo Certificato medico</a>
						<div class="container-error mt-2" th:if="*{errMessage} != null">
    						<span th:text="*{errMessage}" style="color:red">*</span>
						</div>
					</th>
				</tr>
				</thead>
			<tbody>
			<tr th:if="${certificato != null}" 
			th:attr="data-id=${certificato.id}"
    		class="clickable-row" style='cursor: pointer'>
				<td th:text="${certificato.dataCertificato}"></td>
				<td align="center">
				<a>
  					<span th:text="${certificato.tipo} == true ? 'agonistico' : 'normale'"></span>
				</a>

				</td>
				
				</tr>
			</tbody>

		</table>
		</div>
		<script>
			document.addEventListener("DOMContentLoaded", function () {
    		const rows = document.querySelectorAll(".clickable-row");
    		const socioIdInput = document.querySelector('input[type="text"]');
    		const socioId = socioIdInput ? socioIdInput.value : null;
    		rows.forEach(row => {
        	row.addEventListener("click", () => {
            if (socioId) {
                window.location.href = `/updateCertificato?id=${socioId}`;
            }
        });
    });
});
</script>


		
</body>
</html>